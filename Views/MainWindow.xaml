<ui:FluentWindow x:Class="Tools.Views.MainWindow"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                 xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
                 xmlns:tray="http://schemas.lepo.co/wpfui/2022/xaml/tray"
                 xmlns:viewModel="clr-namespace:Tools.ViewModel"
                 xmlns:controls="clr-namespace:Tools.Controls"
                 xmlns:extensions="clr-namespace:Tools.Extensions"
                 xmlns:pages="clr-namespace:Tools.Views.Pages"
                 xmlns:codeforcesInfo="clr-namespace:Tools.Views.Pages.CodeforcesInfo"
                 xmlns:hideInBmp="clr-namespace:Tools.Views.Pages.HideInBmp"
                 xmlns:base64Tool="clr-namespace:Tools.Views.Pages.Base64Tool"
                 ExtendsContentIntoTitleBar="True"
                 mc:Ignorable="d"
                 d:DataContext="{d:DesignInstance Type=viewModel:MainWindowViewModel}"
                 ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
                 ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                 WindowStartupLocation="CenterScreen"
                 Title="MainWindow" Height="600" Width="900">
    <ui:FluentWindow.Resources>
        <!--<BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />-->
    </ui:FluentWindow.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <ui:TitleBar Title="{Binding Title}" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2">
            <ui:TitleBar.Icon>
                <ui:SymbolIcon Symbol="Toolbox28" />
            </ui:TitleBar.Icon>
            <ui:TitleBar.TrailingContent>
                <StackPanel VerticalAlignment="Top" Orientation="Horizontal">
                    <controls:TwoStateButton Width="46" Height="32"
                                             Background="Transparent"
                                             BorderBrush="Transparent"
                                             ToolTip="切换主题颜色"
                                             EnableIcon="{ui:SymbolIcon WeatherSunny24}"
                                             EnableCommand="{Binding ChangeToDarkCommand}"
                                             DisableIcon="{ui:SymbolIcon WeatherMoon24}"
                                             DisableCommand="{Binding ChangeToLightCommand}"
                                             IsChecked="{Binding IsDark}" />
                    <ui:Button Width="46" Height="32"
                               Background="Transparent"
                               BorderBrush="Transparent"
                               Command="{Binding HideCommand}"
                               Icon="{ui:SymbolIcon CaretDown24}"
                               ToolTip="最小化到托盘" />
                </StackPanel>
            </ui:TitleBar.TrailingContent>
        </ui:TitleBar>

        <ui:NavigationView x:Name="RootNavigation"
                           PaneTitle="工具菜单"
                           Grid.Column="0" Grid.Row="1"
                           IsBackButtonVisible="Collapsed"
                           IsPaneToggleVisible="True"
                           OpenPaneLength="200">
            <ui:NavigationView.MenuItems>
                <!-- 主页 -->
                <ui:NavigationViewItem Content="主页"
                                       NavigationCacheMode="Enabled"
                                       TargetPageType="{x:Type pages:HomePage}">
                    <ui:NavigationViewItem.Icon>
                        <ui:SymbolIcon Symbol="Home24" Filled="True" Height="20" Width="20" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>

                <!-- Codeforces信息查看 -->
                <ui:NavigationViewItem Content="Codeforces信息查看"
                                       NavigationCacheMode="Enabled"
                                       TargetPageType="{x:Type codeforcesInfo:CodeforcesInfoPage}">
                    <ui:NavigationViewItem.Icon>
                        <ui:ImageIcon Source="/Assets/Images/CodeforcesIcon.png" Height="20" Width="20" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>

                <!-- Bmp图片隐写工具 -->
                <ui:NavigationViewItem Content="Bmp图片隐写工具"
                                       NavigationCacheMode="Enabled"
                                       TargetPageType="{x:Type hideInBmp:HideInBmpPage}">
                    <ui:NavigationViewItem.Icon>
                        <ui:SymbolIcon Symbol="ImageAltText20" Filled="True" Height="20" Width="20" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>

                <!-- Base64编解码工具 -->
                <ui:NavigationViewItem Content="Base64编解码工具"
                                       NavigationCacheMode="Enabled"
                                       TargetPageType="{x:Type base64Tool:Base64ToolPage}">
                    <ui:NavigationViewItem.Icon>
                        <ui:SymbolIcon Symbol="ClipboardCode24" Filled="False" Height="20" Width="20" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>
            </ui:NavigationView.MenuItems>
            <ui:NavigationView.FooterMenuItems>
                <ui:NavigationViewItem Content="设置"
                                       NavigationCacheMode="Enabled"
                                       Icon="{ui:SymbolIcon Settings16}"
                                       TargetPageType="{x:Type pages:SettingPage}" />
            </ui:NavigationView.FooterMenuItems>
            <ui:NavigationView.ContentOverlay>
                <Grid>
                    <ui:SnackbarPresenter x:Name="SnackbarPresenter" />
                </Grid>
            </ui:NavigationView.ContentOverlay>
        </ui:NavigationView>

        <ContentPresenter x:Name="RootContentDialog" Grid.Row="1" Grid.Column="0" />

        <tray:NotifyIcon Grid.Column="0" Grid.Row="0"
                         FocusOnLeftClick="False"
                         Icon="/Assets/Icons/sd_icon.png"
                         LeftDoubleClick="OnNotifyIconLeftDoubleClick"
                         MenuOnRightClick="True">
            <tray:NotifyIcon.Menu>
                <ContextMenu>
                    <ContextMenu.DataContext>
                        <extensions:ServiceLocator Type="{x:Type viewModel:MainWindowViewModel}" />
                    </ContextMenu.DataContext>
                    <ui:MenuItem Command="{Binding ShowCommand}"
                                 Icon="{ui:SymbolIcon OpenFolder24}"
                                 Header="显示主界面" d:DataContext="{d:DesignInstance viewModel:MainWindowViewModel }" />
                    <ui:MenuItem Command="{Binding ExitCommand}"
                                 Icon="{ui:SymbolIcon ArrowExit20, Filled=True}"
                                 Header="退出" d:DataContext="{d:DesignInstance viewModel:MainWindowViewModel }" />
                </ContextMenu>
            </tray:NotifyIcon.Menu>
        </tray:NotifyIcon>
    </Grid>
</ui:FluentWindow>
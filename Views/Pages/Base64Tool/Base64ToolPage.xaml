<Page x:Class="Tools.Views.Pages.Base64Tool.Base64ToolPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
      xmlns:viewModel="clr-namespace:Tools.ViewModel.Base64ToolPage"
      mc:Ignorable="d"
      d:DesignHeight="550"
      d:DesignWidth="692"
      ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
      ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
      d:DataContext="{d:DesignInstance Type=viewModel:Base64ToolViewModel}"
      Title="Base64ToolPage">


    <Grid Margin="42, 16">
        <Grid.RowDefinitions>
            <RowDefinition Height="60" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- 标题区域 -->
        <Grid Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="0,0,0,10">
                <ui:SymbolIcon Symbol="Code24"
                               Filled="True"
                               FontSize="24"
                               Margin="0,0,12,0"
                               Foreground="#4CAF50" />

                <ui:TextBlock Text="Base64 编码/解码工具"
                              FontTypography="Title"
                              VerticalAlignment="Center"
                              FontSize="24"
                              Foreground="#FFFFFF" />
            </StackPanel>
        </Grid>

        <!-- 主内容区域 -->
        <Grid Grid.Row="1" Margin="0,0,0,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- 输入区域 -->
            <GroupBox Grid.Column="0" Header="输入文本"
                      Foreground="{DynamicResource TextFillColorPrimaryBrush}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <ui:TextBox Grid.Row="0"
                                Text="{Binding InputText, UpdateSourceTrigger=PropertyChanged}"
                                AcceptsReturn="True" TextWrapping="Wrap"
                                VerticalScrollBarVisibility="Auto"
                                ClearButtonEnabled="False"
                                Margin="5,5,5,0" />

                    <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="5">
                        <ui:Button Content="粘贴"
                                   Command="{Binding PasteInputCommand}"
                                   Appearance="Secondary"
                                   Margin="0,0,5,0" />
                        <ui:Button Content="清空"
                                   Command="{Binding ClearInputCommand}"
                                   Appearance="Secondary"
                                   Margin="0,0,5,0" />
                        <ui:Button Content="从文件导入"
                                   Command="{Binding ImportFromFileCommand}"
                                   Appearance="Secondary" />
                    </StackPanel>
                </Grid>
            </GroupBox>

            <!-- 操作按钮区域 -->
            <StackPanel Grid.Column="1" Orientation="Vertical" VerticalAlignment="Center" Margin="10">
                <ui:Button Content="编码 →"
                           Command="{Binding EncodeCommand}"
                           Appearance="Primary"
                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                           Margin="0,0,0,10"
                           Width="120" />

                <ui:Button Content="解码 →"
                           Command="{Binding DecodeCommand}"
                           Appearance="Primary"
                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                           Width="120" />
            </StackPanel>

            <!-- 输出区域 -->
            <GroupBox Grid.Column="2" Header="输出结果"
                      Foreground="{DynamicResource TextFillColorPrimaryBrush}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <ui:TextBox Grid.Row="0"
                                Text="{Binding OutputText}"
                                AcceptsReturn="True" TextWrapping="Wrap"
                                VerticalScrollBarVisibility="Auto"
                                ClearButtonEnabled="False"
                                IsReadOnly="True"
                                Margin="5,5,5,0" />

                    <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="5">
                        <ui:Button Content="复制结果"
                                   Command="{Binding CopyOutputCommand}"
                                   Appearance="Secondary"
                                   Margin="0,0,5,0" />
                        <ui:Button Content="导出到文件"
                                   Command="{Binding ExportToFileCommand}"
                                   Appearance="Secondary" />
                    </StackPanel>
                </Grid>
            </GroupBox>
        </Grid>

        <!-- 选项区域 -->
        <GroupBox Grid.Row="2" Header="选项"
                  Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                  Margin="0,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <CheckBox Grid.Column="0" Content="URL 安全编码 (替换 +/ 为 -__)"
                          IsChecked="{Binding IsUrlSafe}"
                          Margin="5" />

                <!-- 检测结果显示 -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="5,0">
                    <ui:TextBlock Text="自动检测到系统编码：" VerticalAlignment="Center" />
                    <ui:TextBlock Text="{Binding DetectedEncodingName}"
                                  FontWeight="SemiBold" VerticalAlignment="Center"
                                  Margin="5,0,0,0" />
                </StackPanel>
            </Grid>
        </GroupBox>
    </Grid>
</Page>